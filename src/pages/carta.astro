---
import Layout from "../layouts/Layout.astro";
import { menuSections, teaSections } from "./../data/menuData";

// Función para generar HTML de una sección del menú
function generateMenuSection(title, items) {
  return `
    <div class="p-4 sm:p-6 bg-customGray bg-opacity-85 rounded shadow-md border-y-8 border-customYellow">
      <h3 class="text-lg sm:text-xl font-semibold mb-4 text-center">${title}</h3>
      <ol class="mb-2">
        ${items.map(item => typeof item === 'string' ? `<li>${item}</li>` : `<li class="${item.className}">${item.text}</li>`).join('')}
      </ol>
    </div>
  `;
}

// Función para generar HTML de una sección de té
function generateTeaSection(title, items) {
  return `
    <div class="p-4 sm:p-6 bg-customGray bg-opacity-85 rounded shadow-md border-y-8 border-customYellow">
      <h3 class="text-lg sm:text-xl font-semibold mb-4 text-center">${title}</h3>
      ${items.map(item => `
        <div class="grid grid-cols-1 sm:grid-cols-2 mx-8 sm:mx-32">
          <div>${item.type}:</div>
          <div>${item.details.map(detail => `<p>- ${detail}</p>`).join('')}</div>
        </div>
      `).join('')}
    </div>
  `;
}

// Función para generar HTML de la sección de infusiones pq no funciona?
function generateInfusionsSection(title, items) {
  return `
    <div class="p-4 sm:p-6 bg-customGray bg-opacity-85 rounded shadow-md border-y-8 border-customYellow">
      <h3 class="text-lg sm:text-xl font-semibold mb-4 text-center">${title}</h3>
      <div class="px-8 sm:px-32">
        <ol>
          ${items.map(item => {
            const [name, description] = item.split(': ');
            return `<li><span class="font-bold">${name}:&nbsp;&nbsp;&nbsp;&nbsp;</span>${description}</li>`;
          }).join('')}
        </ol>
      </div>
    </div>
  `;
}

---
<Layout title="Bristol Koffee - Carta">
  <div class="container mx-auto max-w-screen-lg py-4 sm:py-8">
    <h2 class="text-2xl sm:text-3xl font-semibold mb-4 sm:mb-8 text-center">Nuestra Carta</h2>
    <section>
      <div class="relative">
        <div class="pt-4 sm:pt-12">
          <div class="absolute inset-0 -top-2 sm:-top-4 bg-fixed bg-center bg-cover bg-no-repeat filter grayscale blur-sm" style="background-image: url('https://res.cloudinary.com/dtmrroz8t/image/upload/v1714293432/Bristol%20Koffee/bristol_logo_tmp_nouozw.png');"></div>
          <div class="relative z-10 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-8">
            {menuSections.map(section => generateMenuSection(section.title, section.items))}
          </div>
        </div>
      </div>
    </section>
    <section>
      <div class="relative">
        <div class="pt-4 sm:pt-12">
          <div class="relative z-10 grid grid-cols-1 gap-4 sm:gap-8">
            {teaSections.length >= 2 && generateInfusionsSection("Infusiones", teaSections[1].items)}
            {generateInfusionsSection("Infusiones", teaSections[1].items)}
          </div>
        </div>
      </div>
    </section>
  </div>
</Layout>
